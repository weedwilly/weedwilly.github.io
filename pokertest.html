<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>德州撲克遊戲</title>
  <style>
    body { font-family: sans-serif; background: #1b1b1b; color: #fff; text-align: center; }
    .table { display: flex; flex-wrap: wrap; justify-content: center; margin-top: 20px; }
    .player { width: 120px; margin: 10px; padding: 10px; background: #333; border-radius: 8px; }
    .card { display: inline-block; width: 40px; height: 60px; margin: 2px; background: #fff; color: #000; border-radius: 6px; line-height: 60px; font-size: 18px; }
    .community { margin: 20px 0; }
    button { padding: 10px 20px; font-size: 16px; margin: 10px; }
  </style>
</head>
<body>
  <h1>♠ 德州撲克遊戲 ♣</h1>
  <div class="community">
    <h2>公共牌</h2>
    <div id="communityCards"></div>
  </div>
  <div class="table" id="players"></div>
  <div>
    <button onclick="startGame()">開始新局</button>
    <button onclick="nextStage()">下一階段</button>
  </div>

  <script>
    const suits = ['♠', '♥', '♦', '♣'];
    const ranks = ['2','3','4','5','6','7','8','9','10','J','Q','K','A'];
    let deck = [], stage = 0;
    const playerCount = 4;
    let players = [], communityCards = [];

    function shuffleDeck() {
      deck = [];
      for (let s of suits) for (let r of ranks) deck.push(r + s);
      deck.sort(() => Math.random() - 0.5);
    }

    function startGame() {
      shuffleDeck();
      stage = 0;
      communityCards = [];
      players = Array.from({length: playerCount}, (_, i) => ({
        name: i === 0 ? '你' : `AI 玩家 ${i}`,
        cards: [deck.pop(), deck.pop()]
      }));
      render();
    }

    function nextStage() {
      if (stage === 0) communityCards = [deck.pop(), deck.pop(), deck.pop()];
      else if (stage === 1) communityCards.push(deck.pop());
      else if (stage === 2) communityCards.push(deck.pop());
      stage++;
      render();
    }

    function render() {
      document.getElementById('communityCards').innerHTML =
        communityCards.map(c => `<div class="card">${c}</div>`).join('');
      document.getElementById('players').innerHTML = players.map(p =>
        `<div class="player">
          <strong>${p.name}</strong><br>
          ${p.cards.map(c => `<div class="card">${c}</div>`).join('')}
        </div>`
      ).join('');
    }
  </script>
</body>
</html>
