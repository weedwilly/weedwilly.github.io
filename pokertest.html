<!DOCTYPE html>
<html lang="zh-TW">
<head>
  <meta charset="UTF-8">
  <title>德州撲克遊戲體驗</title>
  <style>
    body { font-family: sans-serif; background: #2e2e2e; color: #fff; text-align: center; }
    .card { display: inline-block; width: 60px; height: 90px; margin: 5px; background: #fff; color: #000; border-radius: 8px; line-height: 90px; font-size: 24px; }
    .section { margin: 20px 0; }
    button { padding: 10px 20px; font-size: 16px; margin: 10px; }
    .info { font-size: 18px; margin-top: 10px; }
  </style>
</head>
<body>
  <h1>🃏 德州撲克遊戲體驗</h1>

  <div class="section">
    <h2>你的底牌</h2>
    <div id="playerCards"></div>
    <div class="info">籌碼：<span id="playerChips">1000</span></div>
  </div>

  <div class="section">
    <h2>AI 底牌</h2>
    <div id="aiCards">❓❓</div>
    <div class="info">籌碼：<span id="aiChips">1000</span></div>
  </div>

  <div class="section">
    <h2>公共牌</h2>
    <div id="communityCards"></div>
  </div>

  <div class="section">
    <h2>彩池：<span id="pot">0</span></h2>
    <button onclick="playerAction('call')">跟注</button>
    <button onclick="playerAction('raise')">加注</button>
    <button onclick="playerAction('fold')">棄牌</button>
  </div>

  <div class="section">
    <div id="result" class="info"></div>
  </div>

  <script>
    const suits = ['♠', '♥', '♦', '♣'];
    const ranks = ['2', '3', '4', '5', '6', '7', '8', '9', '10', 'J', 'Q', 'K', 'A'];
    let deck = [], playerCards = [], aiCards = [], communityCards = [];
    let playerChips = 1000, aiChips = 1000, pot = 0;

    function shuffleDeck() {
      deck = [];
      for (let s of suits) {
        for (let r of ranks) {
          deck.push(r + s);
        }
      }
      deck.sort(() => Math.random() - 0.5);
    }

    function startGame() {
      shuffleDeck();
      playerCards = [deck.pop(), deck.pop()];
      aiCards = [deck.pop(), deck.pop()];
      communityCards = [deck.pop(), deck.pop(), deck.pop(), deck.pop(), deck.pop()];
      pot = 0;
      updateUI();
    }

    function playerAction(action) {
      if (action === 'fold') {
        document.getElementById('result').innerText = '你棄牌了，AI 獲勝！';
        aiChips += pot;
      } else {
        let bet = action === 'raise' ? 100 : 50;
        if (playerChips < bet) bet = playerChips;
        playerChips -= bet;
        pot += bet;
        aiTurn();
      }
      updateUI();
    }

    function aiTurn() {
      let decision = Math.random();
      if (decision < 0.2) {
        document.getElementById('result').innerText = 'AI 棄牌了，你獲勝！';
        playerChips += pot;
      } else {
        let bet = decision < 0.6 ? 50 : 100;
        if (aiChips < bet) bet = aiChips;
        aiChips -= bet;
        pot += bet;
        showdown();
      }
    }

    function showdown() {
      document.getElementById('aiCards').innerHTML = aiCards.map(c => `<div class="card">${c}</div>`).join('');
      let winner = Math.random() < 0.5 ? 'player' : 'ai';
      if (winner === 'player') {
        document.getElementById('result').innerText = '你贏了！🎉';
        playerChips += pot;
      } else {
        document.getElementById('result').innerText = 'AI 贏了！🤖';
        aiChips += pot;
      }
      updateUI();
    }

    function updateUI() {
      document.getElementById('playerCards').innerHTML = playerCards.map(c => `<div class="card">${c}</div>`).join('');
      document.getElementById('communityCards').innerHTML = communityCards.map(c => `<div class="card">${c}</div>`).join('');
      document.getElementById('playerChips').innerText = playerChips;
      document.getElementById('aiChips').innerText = aiChips;
      document.getElementById('pot').innerText = pot;
    }

    startGame();
  </script>
</body>
</html>
